# Ambiente
APP_ENV=dev

# Bot Gerenciador
MANAGER_BOT_TOKEN=seu_token_aqui
TELEGRAM_WEBHOOK_SECRET=seu_secret_aqui
WEBHOOK_BASE_URL=http://localhost:8000

# Database & Queue
DB_URL=postgresql+psycopg://admin:senha_segura@localhost:5432/telegram_bots
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Security
ENCRYPTION_KEY=base64:gere_uma_chave_com_Fernet.generate_key()
ALLOWED_ADMIN_IDS=12345,67890

# xAI Grok API (para funcionalidades de IA)
XAI_API_KEY=seu_token_xai_aqui
GROK_API_BASE_URL=https://api.x.ai/v1
GROK_TIMEOUT=3600
GROK_MAX_CONCURRENT_REQUESTS=100

# Monitoring
LOG_LEVEL=INFO
SENTRY_DSN=

# Rate Limits (por bot+usuário)
RATE_LIMITS_JSON={"cmd:/start":{"limit":30,"window":60},"cb:action":{"limit":20,"window":30}}

# Connection Pools
REDIS_MAX_CONNECTIONS=100
REDIS_HOST=localhost
REDIS_PORT=6379
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40

# Circuit Breaker (APIs externas)
CIRCUIT_BREAKER_FAIL_MAX=5
CIRCUIT_BREAKER_TIMEOUT=60

# Mirror System Configuration
# Modo de espelhamento: 'realtime' (1:1) ou 'batch' (agregado)
MIRROR_MODE=batch

# Configurações do modo batch
MIRROR_BATCH_SIZE=5                  # Mensagens por batch (1-10)
MIRROR_BATCH_DELAY=2                 # Segundos entre batches
MIRROR_FLUSH_TIMEOUT=3               # Segundos para flush automático
MIRROR_MAX_BUFFER=1000              # Máximo de mensagens no buffer global

# Configurações de persistência
MIRROR_PERSIST_BUFFERS=true         # Salvar buffers no banco
MIRROR_RECOVERY_ON_STARTUP=true     # Recuperar buffers órfãos no início

# Configurações de workers
MIRROR_WORKERS=3                     # Número de workers dedicados
MIRROR_WORKER_CONCURRENCY=5         # Threads por worker

# Rate limiting do espelhamento
MIRROR_RATE_LIMIT_ENABLED=true      # Ativar rate limiting
MIRROR_RATE_LIMIT_MESSAGES=30       # Mensagens por segundo (limite Telegram)
